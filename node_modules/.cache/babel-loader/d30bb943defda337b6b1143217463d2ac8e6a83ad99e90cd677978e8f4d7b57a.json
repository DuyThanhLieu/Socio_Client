{"ast":null,"code":"var _jsxFileName = \"/Users/ThanhLieu/Downloads/Socio_Client-master/src/page/CommunityPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Routes, Route, Link } from 'react-router-dom';\nimport { Nav } from './../components/Nav';\nimport { AllUsers } from './../components/AllUsers';\nimport { AllFriends } from './../components/AllFriends';\nimport { AllSentRequests } from './../components/AllSentRequests';\nimport { AllRequests } from './../components/AllRequests';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CommunityPage = () => {\n  _s();\n  const listInnerRef = useRef();\n  const dispatch = useDispatch();\n  const AuthData = useSelector(state => {\n    var _state$AuthReducer;\n    return (_state$AuthReducer = state.AuthReducer) === null || _state$AuthReducer === void 0 ? void 0 : _state$AuthReducer.user;\n  });\n  const NonFriends = useSelector(state => state.UserReducer.allUsersNonFriends);\n  const [pageNum, setPageNum] = useState(2);\n  const [isRunning, setIsRunning] = useState(false);\n  const onScroll = async () => {\n    if (listInnerRef.current) {\n      const {\n        scrollTop,\n        scrollHeight,\n        clientHeight\n      } = listInnerRef.current;\n      // fetch more\n      if (scrollTop + clientHeight === scrollHeight) {\n        // TO SOMETHING HERE\n        console.log('Reached bottom');\n        if (!isRunning) {\n          setIsRunning(true);\n          dispatch({\n            type: \"IS_TIMELINE\"\n          });\n          let res = await axios.get(`https://beta-server-8uoh.onrender.com/api/v1/friends/${AuthData === null || AuthData === void 0 ? void 0 : AuthData._id}/allnonfriends/${pageNum}`);\n          let newData = await res.data;\n          if (newData.length === 0) {\n            return;\n          }\n          dispatch({\n            type: \"NON_FRIENDS_MORE\",\n            payload: newData\n          });\n          setPageNum(prev => prev + 1);\n          setIsRunning(false);\n        }\n      }\n    }\n    ;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \" flex flex-col gap-2\",\n    children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        class: \"flex flex-wrap text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          class: \"mr-2\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: './',\n            \"aria-current\": \"page\",\n            class: \"inline-block p-4 text-blue-600 bg-gray-100 rounded-t-lg active dark:bg-gray-800 dark:text-blue-500\",\n            children: \"All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          class: \"mr-2\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: './friends',\n            class: \"inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300\",\n            children: \"Friends\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          class: \"mr-2\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: './requesting',\n            class: \"inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300\",\n            children: \"Requesting\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          class: \"mr-2\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: './request',\n            class: \"inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300\",\n            children: \"Request\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4 h-[80vh] overflow-y-scroll\",\n      onScroll: () => onScroll(),\n      ref: listInnerRef,\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          index: true,\n          path: \"/\",\n          Component: AllUsers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/friends\",\n          Component: AllFriends\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/requesting\",\n          Component: AllSentRequests\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/request\",\n          Component: AllRequests\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n_s(CommunityPage, \"cz9GGiuOA+/YNBy+c3Xq8Fry8a0=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = CommunityPage;\nvar _c;\n$RefreshReg$(_c, \"CommunityPage\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Routes","Route","Link","Nav","AllUsers","AllFriends","AllSentRequests","AllRequests","useDispatch","useSelector","axios","jsxDEV","_jsxDEV","CommunityPage","_s","listInnerRef","dispatch","AuthData","state","_state$AuthReducer","AuthReducer","user","NonFriends","UserReducer","allUsersNonFriends","pageNum","setPageNum","isRunning","setIsRunning","onScroll","current","scrollTop","scrollHeight","clientHeight","console","log","type","res","get","_id","newData","data","length","payload","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","class","to","ref","index","path","Component","_c","$RefreshReg$"],"sources":["/Users/ThanhLieu/Downloads/Socio_Client-master/src/page/CommunityPage.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { Routes, Route, Link } from 'react-router-dom';\nimport { Nav } from './../components/Nav';\nimport { AllUsers } from './../components/AllUsers';\nimport { AllFriends } from './../components/AllFriends';\nimport { AllSentRequests } from './../components/AllSentRequests';\nimport { AllRequests } from './../components/AllRequests';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axios from 'axios';\nexport const CommunityPage = () => {\n    const listInnerRef = useRef();\n\n    const dispatch = useDispatch()\n    const AuthData = useSelector(state => state.AuthReducer?.user)\n    const NonFriends = useSelector(state => state.UserReducer.allUsersNonFriends)\n    const [pageNum, setPageNum] = useState(2)\n    const [isRunning, setIsRunning] = useState(false)\n\n    const onScroll = async () => {\n        if (listInnerRef.current) {\n            const { scrollTop, scrollHeight, clientHeight } = listInnerRef.current;\n            // fetch more\n            if (scrollTop + clientHeight === scrollHeight) {\n                // TO SOMETHING HERE\n                console.log('Reached bottom')\n                if (!isRunning) {\n                    setIsRunning(true)\n                    dispatch({ type: \"IS_TIMELINE\" })\n                    let res = await axios.get(`https://beta-server-8uoh.onrender.com/api/v1/friends/${AuthData?._id}/allnonfriends/${pageNum}`)\n                    let newData = await res.data\n                    if (newData.length === 0) {\n                        return\n                    }\n                    dispatch({ type: \"NON_FRIENDS_MORE\", payload: newData })\n                    setPageNum(prev => prev + 1)\n                    setIsRunning(false)\n\n\n\n                }\n            }\n        };\n    }\n    return (\n        <div className=' flex flex-col gap-2'>\n            <Nav></Nav>\n            <div className=\"\">\n                <ul class=\"flex flex-wrap text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400\">\n                    <li class=\"mr-2\">\n                        <Link to={'./'} aria-current=\"page\" class=\"inline-block p-4 text-blue-600 bg-gray-100 rounded-t-lg active dark:bg-gray-800 dark:text-blue-500\">All</Link>\n                    </li>\n                    <li class=\"mr-2\">\n                        <Link to={'./friends'} class=\"inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300\">Friends</Link>\n                    </li>\n                    <li class=\"mr-2\">\n                        <Link to={'./requesting'} class=\"inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300\">Requesting</Link>\n                    </li>\n                    <li class=\"mr-2\">\n                        <Link to={'./request'} class=\"inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300\">Request</Link>\n                    </li>\n\n                </ul>\n            </div>\n            <div className=\"px-4 h-[80vh] overflow-y-scroll\" onScroll={() => onScroll()} ref={listInnerRef}>\n                <Routes>\n\n                    <Route index path=\"/\" Component={AllUsers}></Route>\n                    {/* {not include friend model} */}\n                    <Route path=\"/friends\" Component={AllFriends}></Route>\n                    <Route path=\"/requesting\" Component={AllSentRequests}></Route>\n                    <Route path=\"/request\" Component={AllRequests}></Route>\n\n                </Routes>\n            </div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}