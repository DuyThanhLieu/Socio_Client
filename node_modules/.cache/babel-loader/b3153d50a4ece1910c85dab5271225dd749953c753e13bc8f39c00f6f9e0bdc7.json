{"ast":null,"code":"var _jsxFileName = \"/Users/ThanhLieu/Downloads/Socio_Client-master/src/components/HomeCenter.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { UilEstate } from '@iconscout/react-unicons';\nimport { PostShare } from './PostShare';\nimport { Posts } from './Posts';\nimport { FriendsRecommended } from './FriendsRecommended';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Story } from './Story';\nimport { CreateStory } from './CreateStory';\nimport storyData from '../data/Story';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const HomeCenter = () => {\n  _s();\n  const isDarkMode = useSelector(state => state.DarkModeReducer.isDarkMode);\n  const isLoading = useSelector(state => state.PostReducer.isLoading);\n  const AuthData = useSelector(state => state.AuthReducer.user);\n  const UserData = useSelector(state => state.UserReducer.viewingUser);\n  const listInnerRef = useRef();\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const [pageNum, setPageNum] = useState(2);\n  const [isRunning, setIsRunning] = useState(false);\n  const currentPath = location.pathname;\n  const onScroll = async () => {\n    if (listInnerRef.current) {\n      const {\n        scrollTop,\n        scrollHeight,\n        clientHeight\n      } = listInnerRef.current;\n      // fetch more\n      if (scrollTop + clientHeight === scrollHeight) {\n        // TO SOMETHING HERE\n        console.log('Reached bottom');\n        if (currentPath === '/' && !isRunning) {\n          setIsRunning(true);\n          dispatch({\n            type: \"IS_TIMELINE\"\n          });\n          let res = await axios.get(`https://beta-server-8uoh.onrender.com/api/v1/posts/${AuthData === null || AuthData === void 0 ? void 0 : AuthData._id}/timeline/${pageNum}`);\n          let newData = await res.data;\n          if (newData.length === 0) {\n            return;\n          }\n          dispatch({\n            type: \"TIMELINE_MORE\",\n            payload: newData\n          });\n          setPageNum(prev => prev + 1);\n          setIsRunning(false);\n        }\n      }\n    }\n    ;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${isDarkMode ? 'dark' : ''} md:col-span-3 xl:col-span-3`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex pt-0 flex-col col-span-3 gap-4 overflow-y-scroll h-[92vh]\",\n      onScroll: () => onScroll(),\n      ref: listInnerRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" flex gap-2 float-left w-full overflow-y-scroll  \",\n          children: [/*#__PURE__*/_jsxDEV(CreateStory, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this), storyData && storyData.map(data => {\n            return /*#__PURE__*/_jsxDEV(Story, {\n              story: data.story,\n              avatar: data.avatar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 36\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PostShare, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Posts, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"...Loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(FriendsRecommended, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n_s(HomeCenter, \"vpSu0vk/axM9zKXpnoHbwsCYm1Y=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useLocation, useDispatch];\n});\n_c = HomeCenter;\nvar _c;\n$RefreshReg$(_c, \"HomeCenter\");","map":{"version":3,"names":["React","useRef","useState","UilEstate","PostShare","Posts","FriendsRecommended","useSelector","useDispatch","Story","CreateStory","storyData","useLocation","axios","jsxDEV","_jsxDEV","HomeCenter","_s","isDarkMode","state","DarkModeReducer","isLoading","PostReducer","AuthData","AuthReducer","user","UserData","UserReducer","viewingUser","listInnerRef","location","dispatch","pageNum","setPageNum","isRunning","setIsRunning","currentPath","pathname","onScroll","current","scrollTop","scrollHeight","clientHeight","console","log","type","res","get","_id","newData","data","length","payload","prev","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","map","story","avatar","_c","$RefreshReg$"],"sources":["/Users/ThanhLieu/Downloads/Socio_Client-master/src/components/HomeCenter.jsx"],"sourcesContent":["import React, { useRef, useState } from 'react'\nimport { UilEstate } from '@iconscout/react-unicons'\nimport { PostShare } from './PostShare';\nimport { Posts } from './Posts';\nimport { FriendsRecommended } from './FriendsRecommended';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Story } from './Story';\nimport { CreateStory } from './CreateStory';\nimport storyData from '../data/Story'\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\nexport const HomeCenter = () => {\n    const isDarkMode = useSelector(state => state.DarkModeReducer.isDarkMode)\n    const isLoading = useSelector(state => state.PostReducer.isLoading)\n    const AuthData = useSelector(state => state.AuthReducer.user)\n    const UserData = useSelector(state => state.UserReducer.viewingUser)\n\n\n    const listInnerRef = useRef();\n    const location = useLocation();\n    const dispatch = useDispatch()\n    const [pageNum, setPageNum] = useState(2)\n    const [isRunning, setIsRunning] = useState(false)\n    const currentPath = location.pathname;\n    const onScroll = async () => {\n        if (listInnerRef.current) {\n            const { scrollTop, scrollHeight, clientHeight } = listInnerRef.current;\n            // fetch more\n            if (scrollTop + clientHeight === scrollHeight) {\n                // TO SOMETHING HERE\n                console.log('Reached bottom')\n                if (currentPath === '/' && !isRunning) {\n                    setIsRunning(true)\n                    dispatch({ type: \"IS_TIMELINE\" })\n                    let res = await axios.get(`https://beta-server-8uoh.onrender.com/api/v1/posts/${AuthData?._id}/timeline/${pageNum}`)\n                    let newData = await res.data\n                    if (newData.length === 0) {\n                        return\n                    }\n                    dispatch({ type: \"TIMELINE_MORE\", payload: newData })\n                    setPageNum(prev => prev + 1)\n                    setIsRunning(false)\n\n\n\n                }\n            }\n        };\n    }\n    return (\n\n        <div className={`${isDarkMode ? 'dark' : ''} md:col-span-3 xl:col-span-3`}>\n\n            <div className=\"flex pt-0 flex-col col-span-3 gap-4 overflow-y-scroll h-[92vh]\" onScroll={() => onScroll()} ref={listInnerRef}>\n\n                <div className=\"\">\n                    <div className=\" flex gap-2 float-left w-full overflow-y-scroll  \" >\n                        <CreateStory></CreateStory>\n                        {storyData && storyData.map(data => {\n                            return <Story story={data.story} avatar={data.avatar}></Story>\n                        })}\n\n                    </div>\n                </div>\n\n                <PostShare></PostShare>\n                <Posts></Posts>\n                {isLoading && <p>...Loading</p>}\n                <FriendsRecommended></FriendsRecommended>\n\n            </div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}